## API 명세 - 장바구니 추가 API

### 1. 개요

사용자가 장바구니에 상품을 추가하는 API입니다.  
상품을 장바구니에 추가할 때, 상품의 재고가 충분한지 확인하고, 재고가 충분할 경우 장바구니에 상품을 추가합니다.

---

### 2. API 정보

| 항목        | 내용                                               |
|-------------|--------------------------------------------------|
| **API 명칭**  | 장바구니 추가 API                                      |
| **설명**      | 사용자가 장바구니에 상품을 추가하고, 재고가 부족한 경우 오류를 반환하는 API입니다. |
| **관련 도메인** | Cart, CartItem, Product, User                    |

---

### 3. 요청

- **Method**: `POST`
- **Endpoint**: `/cart/{userId}/add`

#### 3.1 Path Variable

| 변수명   | 타입   | 필수  | 설명                                 |
|----------|--------|-------|----------------------------------------|
| userId   | Long   | ✅    | 장바구니에 상품을 추가할 대상 사용자 ID (고유 사용자 식별자) |

#### 3.2 Request Body
```
{
  "productId": 12345,
  "quantity": 2
}
```
| 필드명     | 타입   | 필수  | 설명                                                 |
|------------|--------|-------|--------------------------------------------------------|
| productId  | Long   | ✅    | 장바구니에 추가할 상품의 ID                             |
| quantity   | Int    | ✅    | 추가할 상품의 수량                                     |

---

### 4. 응답

#### 4.1 성공 시
```
{
  "message": "장바구니에 상품이 추가되었습니다."
}
```
| 필드명   | 타입   | 설명                     |
|----------|--------|--------------------------|
| message  | String | 처리 결과 메시지         |

#### 4.2 상태 코드

| 코드 | 설명         |
|------|--------------|
| 200  | 요청 성공    |
| 400  | 잘못된 요청  |
| 404  | 상품 없음    |
| 409  | 재고 부족    |

---

### 5. 예외 처리

| 예외 상황          | HTTP 상태 | 설명                                                       |
|-------------------|------------|------------------------------------------------------------|
| 상품 ID 누락 또는 오류 | 400        | 요청에 상품 ID가 없거나 잘못된 상품 ID가 전달된 경우         |
| 상품 없음         | 404        | 존재하지 않는 상품 ID로 요청한 경우                         |
| 재고 부족         | 409        | 요청한 수량만큼의 재고가 부족한 경우                         |

---

### 6. 테스트 포인트

| 테스트 항목            | 검증 내용                                                       |
|-----------------------|------------------------------------------------------------------|
| 상품 ID 확인           | 요청에 포함된 상품 ID가 유효한지 확인                          |
| 재고 확인              | 재고가 충분한지 확인하고 부족할 경우 예외를 처리하는지 확인      |
| 정상 동작 확인         | 정상적인 상품 추가 요청 시 장바구니에 정상적으로 추가되는지 확인 |
| 재고 부족 예외 처리     | 재고가 부족할 경우 적절한 예외가 발생하는지 확인                 |

[돌아가기](../../README.md)