# ì¸ê¸° ìƒí’ˆ ì¡°íšŒ

## ìƒíƒœ
Accepted

## ë§¥ë½ (Context)
- ê¸°ëŠ¥: ìµœê·¼ 3ì¼ê°„ ì¸ê¸° ìƒí’ˆ ì¡°íšŒ
- ëª©ì : ì‚¬ìš©ìžê°€ ê°€ìž¥ ë§Žì´ ì£¼ë¬¸í•œ ìƒí’ˆì„ ìƒìœ„ 5ê°œê¹Œì§€ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥
- ì¿¼ë¦¬: `order_item` í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ `product_id`ë³„ë¡œ `SUM(quantity)` í›„ ì •ë ¬
- ì¡°ê±´: `created_at >= :fromDate AND created_at < :toDate`
- ë”ë¯¸ ë°ì´í„° 50ë§Œ ê±´ ê¸°ì¤€, productIdëŠ” 1~1000 ë²”ìœ„ë¡œ ê³ ë¥´ê²Œ ë¶„í¬ì‹œí‚´
- ê³ ë¶€í•˜ ìƒí™©ì—ì„œ ì‹¬ê°í•œ ì§€ì—° ë°œìƒí•˜ì—¬ ë³‘ëª© ì›ì¸ ë¶„ì„ ì§„í–‰ ì¤‘

## ì§„í–‰ ë‚´ìš© (Progress)
- QueryDSL ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒ ì¿¼ë¦¬ ì‹¤í–‰ë¨:

```sql
SELECT product_id, SUM(quantity) AS total_quantity  
FROM order_item  
WHERE created_at >= '2025-04-14 00:00:00'  
  AND created_at < '2025-04-17 00:00:00'  
GROUP BY product_id  
ORDER BY total_quantity DESC  
LIMIT 5;
```

- ë‹¨ìˆœ ì¸ë±ìŠ¤(`created_at`, `product_id`)ë¡œëŠ” `filesort`, `temporary` ì œê±° ë¶ˆê°€ëŠ¥
- `SUM(quantity)` ê¸°ë°˜ ì •ë ¬ì€ ì¸ë±ìŠ¤ë¡œ ì»¤ë²„ ë¶ˆê°€

## ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼ (k6 ê¸°ë°˜)

- ì‚¬ìš©ìž ì‹œë‚˜ë¦¬ì˜¤:

```js
stages: [  
  { duration: '30s', target: 100 },  
  { duration: '1m', target: 300 },  
  { duration: '30s', target: 0 },    
]
```

- í…ŒìŠ¤íŠ¸ ì „ ì¿¼ë¦¬ ê¸°ì¤€ ì§€í‘œ ìš”ì•½:

```text
ðŸ“¦ ì´ ìš”ì²­ ìˆ˜: 2333  
âŒ ì‹¤íŒ¨ìœ¨: 7.24%

â±ï¸ ì‘ë‹µ ì‹œê°„ (http_req_duration)
- í‰ê· : 8474.78 ms
- ìµœì†Œ: 155.91 ms
- ìµœëŒ€: 16080.18 ms
- p50: 9292.86 ms
- p90: 14303.80 ms
- p95: 15007.94 ms
- p99: 15680.52 ms
```

> SLA ê¸°ì¤€: **p99 < 300ms** ê¶Œìž¥

## êµ¬í˜„ ì „ëžµ
- `popular_product_summary` ìš”ì•½ í…Œì´ë¸” ì„¤ê³„
  - í•„ë“œ: `product_id`, `summary_date`, `total_quantity`
  - ë§¤ì¼ `01:00` ê¸°ì¤€ ë°°ì¹˜ ìž‘ì—…ìœ¼ë¡œ ìš”ì•½ ë°ì´í„° ê°±ì‹ 
- êµ¬í˜„ ë°©ì‹
  - ê¸°ì¡´ ì§‘ê³„ â†’ ì‚­ì œ (`deleteAll()`)
  - ìƒˆë¡œìš´ ê²°ê³¼ ì €ìž¥ (`saveAll()`ë¡œ ìƒìœ„ 5ê°œë§Œ ì €ìž¥)
  - summary_dateëŠ” **ê¸°ë¡ìš© í•„ë“œ**ë¡œë§Œ ì‚¬ìš©ë˜ë©°, í˜„ìž¬ëŠ” ì¿¼ë¦¬ ì¡°ê±´ì— í¬í•¨í•˜ì§€ ì•ŠìŒ
- API ë³€ê²½
  - ì¸ê¸° ìƒí’ˆ ì¡°íšŒ ì‹œ ê¸°ì¡´ `order_item` ê¸°ì¤€ â†’ `summary` í…Œì´ë¸” ê¸°ì¤€ìœ¼ë¡œ ì¡°íšŒ
  - Repository ë©”ì„œë“œëŠ” `findAll()`ë§Œ ì‚¬ìš© (5ê°œë§Œ ì €ìž¥ë˜ë¯€ë¡œ ë³„ë„ ì¡°ê±´ ë¶ˆí•„ìš”)

## ì„±ëŠ¥ ê°œì„  ì´í›„ ê²°ê³¼

- ë°°ì¹˜ ì‹¤í–‰ í›„ ìš”ì•½ í…Œì´ë¸” ê¸°ë°˜ ì¡°íšŒë¡œ ë³€ê²½
- ê°œì„  í›„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼:

```text
ðŸ“¦ ì´ ìš”ì²­ ìˆ˜: 126124
âŒ ì‹¤íŒ¨ìœ¨: 0.00%

â±ï¸ ì‘ë‹µ ì‹œê°„ (http_req_duration)
- í‰ê· : 142.56 ms
- ìµœì†Œ: 2.24 ms
- ìµœëŒ€: 726.44 ms
- p50: 143.86 ms
- p90: 243.66 ms
- p95: 258.86 ms
- p99: 302.39 ms
```

> SLA ê¸°ì¤€(p99 < 300ms) ê·¼ì ‘ ë‹¬ì„±. ëŒ€ë¶€ë¶„ ìš”ì²­ì—ì„œ ì•ˆì •ì ì¸ ì‘ë‹µ í™•ë³´.

## ê²°ë¡ 
- ì¸ë±ìŠ¤ ìµœì í™”ë§Œìœ¼ë¡œëŠ” ë³‘ëª© í•´ì†Œ ë¶ˆê°€
- ì¡°íšŒ ì „ìš© ìš”ì•½ í…Œì´ë¸” ë„ìž…ì´ ê°€ìž¥ íš¨ê³¼ì 
- ìž¥ì : ì¡°íšŒ ì„±ëŠ¥ ë¹„ì•½ì  ê°œì„ , ë¶€í•˜ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œë„ ì•ˆì •ì 
- ë‹¨ì : ì‹¤ì‹œê°„ ë°ì´í„° ë°˜ì˜ ì–´ë ¤ì›€, ìš´ì˜ ë³µìž¡ë„ ì¦ê°€


## ì¶”ì  ì •ë³´
- ìž‘ì„±ì¼: 2025-04-17
- ìž‘ì„±ìž: @ì˜ì¸


[ëŒì•„ê°€ê¸°](../../../README.md)